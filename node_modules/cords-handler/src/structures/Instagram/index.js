const axios = require("axios");
class Instagram {
  constructor(username) {
    if (!username) throw new TypeError("Username Must Be Supplied.");
    else {
      this.username = username;
    }
  }
  async start() {
    var url = `https://instagram.com/${this.username}/?__a=1`;
    let response, account, details;
    try {
      response = await axios.get(url);
      account = response.data;
      details = account.graphql.user;
    } catch (e) {
      console.log("Could Not Find That Account.....");
    }

    const jsondata = {
      username: details.username,
      profile_picture: details.profile_pic_url_hd,
      fullname: details.full_name,
      posts: details.edge_owner_to_timeline_media.count,
      followers: details.edge_followed_by.count,
      following: details.edge_follow.count,
      isprivate: details.is_private,
    };
    return jsondata;
  }
}
module.exports = Instagram;
